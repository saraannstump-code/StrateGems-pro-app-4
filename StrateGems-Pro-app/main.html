// --- FINAL RENDERING LOGIC ---

// 1. Function to render any page based on the global 'currentPage' variable
const renderPage = () => {
    switch(currentPage) {
        case 'features':
            appRoot.innerHTML = renderFeaturesPage();
            break;
        case 'home':
        default:
            // Assuming you have a renderHomePage function (not provided yet)
            appRoot.innerHTML = '<h1>Welcome Home - Content Not Yet Implemented</h1><p>Change currentPage to "features" for now.</p>'; 
            break;
    }
    // This runs the Lucide icon replacement on the newly rendered HTML
    lucide.createIcons(); 
}

// 2. Window load event (to run the page rendering immediately)
window.onload = () => {
    // For testing: Force the Features page to load immediately
    currentPage = 'features'; 
    renderPage();
}

// 3. Simple API Key Logic (for the chat widget)
const toggleChat = () => {
    const chatWindow = document.getElementById('chat-window');
    chatWindow.classList.toggle('hidden');
    checkApiKey(); // Check key status when chat is opened
}

const checkApiKey = () => {
    geminiKey = localStorage.getItem('GEMINI_API_KEY') || '';
    const keyScreen = document.getElementById('api-key-screen');
    if (geminiKey) {
        keyScreen.classList.add('hidden');
    } else {
        keyScreen.classList.remove('hidden');
    }
}

const saveKey = () => {
    const input = document.getElementById('geminiKeyInput').value.trim();
    if (input) {
        localStorage.setItem('GEMINI_API_KEY', input);
        checkApiKey();
    }
}

const resetKey = () => {
    localStorage.removeItem('GEMINI_API_KEY');
    checkApiKey();
}
// Add your other demo functions (generateStrategy, enhanceDescription, etc.) here

// IMPORTANT: After pasting all this, make sure the file ends with:
// </script>
// </body>
// </html>